<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual (8 April 2023)
is for Libmarpa 11.0.7.

Copyright (C) 2023 Jeffrey Kegler.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE. -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Location accessors (Libmarpa 11.0.7)</title>

<meta name="description" content="Location accessors (Libmarpa 11.0.7)">
<meta name="keywords" content="Location accessors (Libmarpa 11.0.7)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index-of-terms.html#Index-of-terms" rel="index" title="Index of terms">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Recognizer-methods.html#Recognizer-methods" rel="up" title="Recognizer methods">
<link href="Other-parse-status-methods.html#Other-parse-status-methods" rel="next" title="Other parse status methods">
<link href="Recognizer-life-cycle-mutators.html#Recognizer-life-cycle-mutators" rel="prev" title="Recognizer life cycle mutators">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Location-accessors"></a>
<div class="header">
<p>
Next: <a href="Other-parse-status-methods.html#Other-parse-status-methods" accesskey="n" rel="next">Other parse status methods</a>, Previous: <a href="Recognizer-life-cycle-mutators.html#Recognizer-life-cycle-mutators" accesskey="p" rel="prev">Recognizer life cycle mutators</a>, Up: <a href="Recognizer-methods.html#Recognizer-methods" accesskey="u" rel="up">Recognizer methods</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-terms.html#Index-of-terms" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Location-accessors-1"></a>
<h3 class="section">18.5 Location accessors</h3>

<a name="marpa_005fr_005fcurrent_005fearleme"></a><dl>
<dt><a name="index-marpa_005fr_005fcurrent_005fearleme"></a>Accessor function: <em><code>Marpa_Earleme</code></em> <strong>marpa_r_current_earleme</strong> <em>(Marpa_Recognizer <var>r</var>)</em></dt>
<dd>
<p>Successful iff input has started.
If input has not started, returns soft failure.
</p>
<p><strong>Return value</strong>:
On success, the current earleme, which is always non-negative.
On soft failure, -1.
Never returns a hard failure.
</p></dd></dl>

<a name="marpa_005fr_005fearleme"></a><dl>
<dt><a name="index-marpa_005fr_005fearleme"></a>Accessor function: <em>Marpa_Earleme</em> <strong>marpa_r_earleme</strong> <em>(     Marpa_Recognizer <var>r</var>,     Marpa_Earley_Set_ID <var>set_id</var>)</em></dt>
<dd>
<p>On success, returns the earleme of the Earley set with ID <code>set_id</code>.
The ID of an Earley set ID is also called its ordinal.
In the default, token-stream model, Earley set ID and earleme
are always equal, but this is not the case in other input
models.
</p>
<p>Hard fails if there is no Earley set whose ID is
<var>set_id</var>.
This hard failure is fully recoverable.
If <var>set_id</var> was negative,
the error code of the hard failure is
<code>MARPA_ERR_INVALID_LOCATION</code>.
If <var>set_id</var> is greater than the ordinal
of the latest Earley set,
the error code of the hard failure is
<code>MARPA_ERR_NO_EARLEY_SET_AT_LOCATION</code>.
</p>
<p>At this writing, there is no method for
the inverse operation (conversion of an earleme to an Earley set
ID).
One consideration in writing
such a method is that not all earlemes correspond to Earley sets.
Applications that want to map earlemes
to Earley sets will have no trouble if they
are using the standard input model &mdash;
the Earley set
ID is always exactly equal to the earleme in that model.
For other applications
that want an earleme-to-ID mapping,
the most general method is create an ID-to-earleme
array using the
<code>marpa_r_earleme()</code>
method
and invert it.
</p>
<p><strong>Return value</strong>:
On success, the earleme corresponding to Earley
set <var>set_id</var>,
which is always non-negative.
On hard failure, -2.
The hard failures with error codes
<code>MARPA_ERR_INVALID_LOCATION</code> and
<code>MARPA_ERR_NO_EARLEY_SET_AT_LOCATION</code>
are fully recoverable.
</p>
</dd></dl>

<a name="marpa_005fr_005fearley_005fset_005fvalue"></a><dl>
<dt><a name="index-marpa_005fr_005fearley_005fset_005fvalue"></a>Accessor function: <em>int</em> <strong>marpa_r_earley_set_value</strong> <em>(  Marpa_Recognizer <var>r</var>,   Marpa_Earley_Set_ID earley_set)</em></dt>
<dd>
<p>On success,
returns the &ldquo;integer value&rdquo; of <var>earley_set</var>.
For more about the integer value of an Earley set,
see <a href="#marpa_005fr_005fearley_005fset_005fvalues">marpa_r_earley_set_values()</a>.
</p>
<p><strong>Return value</strong>:
On success, returns the the integer value of <var>earley_set</var>,
and sets the error code to <code>MARPA_ERR_NONE</code>.
On hard failure, returns -2,
and sets the error code to
the error code of the hard failure,
which will never be <code>MARPA_ERR_NONE</code>.
Note that -2 is a valid &ldquo;integer value&rdquo; for
an Earley set,
so that when -2 is returned,
the error code is the only way to distinguish
success from failure.
The error code can be determined using
<code>marpa_g_error()</code>.
See <a href="Error-methods.html#marpa_005fg_005ferror">marpa_g_error()</a>.
</p>
</dd></dl>

<a name="marpa_005fr_005fearley_005fset_005fvalues"></a><dl>
<dt><a name="index-marpa_005fr_005fearley_005fset_005fvalues"></a>Mutator function: <em>int</em> <strong>marpa_r_earley_set_values</strong> <em>(  Marpa_Recognizer <var>r</var>,   Marpa_Earley_Set_ID <var>earley_set</var>,   int* <var>p_value</var>,   void** <var>p_pvalue</var>   )</em></dt>
<dd>
<p>On success, does the following:
</p><ul>
<li> If <var>p_value</var> is non-zero,
sets the location pointed to by
<var>p_value</var> to the integer value of the Earley set
with ID <var>earley_set</var>.
</li><li> If <var>p_pvalue</var> is non-zero,
sets the location pointed to by
<var>p_pvalue</var> to the pointer value of the Earley set
with ID <var>earley_set</var>.
</li></ul>

<p>The &ldquo;value&rdquo; and &ldquo;pointer&rdquo; of an Earley set are
an arbitrary integer
and an arbitrary pointer.
Libmarpa never examines them
and the application is free to
use them for its own purposes.
In an application with a codepoint-per-earleme input model, for example,
the integer value of the Earley set
can used to store the current codepoint.
In a traditional token-per-earleme input model,
the integer and pointer values could be used to track the string value of the token &ndash;
the pointer could point to the start of the string,
and the integer could indicate its length.
See <a href="The-codepoint_002dper_002dearleme-model.html#The-codepoint_002dper_002dearleme-model">The codepoint-per-earleme model</a>.
</p>
<p>The Earley set integer value defaults to -1,
and the pointer value defaults to <code>NULL</code>.
The Earley set value and pointer can be set using
the
<code>marpa_r_latest_earley_set_values_set()</code>
method.
See <a href="#marpa_005fr_005flatest_005fearley_005fset_005fvalues_005fset">marpa_r_latest_earley_set_values_set()</a>.
</p>
<p><strong>Return value</strong>: On success, returns a non-negative integer.
On hard failure, returns -2.
</p></dd></dl>

<a name="marpa_005fr_005ffurthest_005fearleme"></a><dl>
<dt><a name="index-marpa_005fr_005ffurthest_005fearleme"></a>Accessor function: <em><code>unsigned int</code></em> <strong>marpa_r_furthest_earleme</strong> <em>(Marpa_Recognizer <var>r</var>)</em></dt>
<dd>
<p><strong>Return value</strong>: The furthest earleme.  Always succeeds.
</p>
</dd></dl>

<a name="marpa_005fr_005flatest_005fearley_005fset"></a><dl>
<dt><a name="index-marpa_005fr_005flatest_005fearley_005fset"></a>Accessor function: <em>Marpa_Earley_Set_ID</em> <strong>marpa_r_latest_earley_set</strong> <em>(Marpa_Recognizer <var>r</var>)</em></dt>
<dd>
<p>Returns the Earley set ID of the latest Earley set.
The ID of an Earley set ID is also called its ordinal.
Applications that want the
value of the latest earleme can convert
this value using
the
<code>marpa_r_earleme()</code>
method.
See <a href="#marpa_005fr_005fearleme">marpa_r_earleme()</a>.
</p>
<p><strong>Return value</strong>: The ID of the latest Earley set.  Always succeeds.
</p></dd></dl>

<a name="marpa_005fr_005flatest_005fearley_005fset_005fvalue_005fset"></a><dl>
<dt><a name="index-marpa_005fr_005flatest_005fearley_005fset_005fvalue_005fset"></a>Mutator function: <em>int</em> <strong>marpa_r_latest_earley_set_value_set</strong> <em>(  Marpa_Recognizer <var>r</var>, int <var>value</var>)</em></dt>
<dd>
<p>Sets the &ldquo;integer value&rdquo; of the latest Earley set to <var>value</var>.
For more about the integer value of an Earley set,
see <a href="#marpa_005fr_005fearley_005fset_005fvalues">marpa_r_earley_set_values()</a>.
</p>
<p><strong>Return value</strong>:
On success, returns the newly set integer value of the latest earley set,
and sets the error code to <code>MARPA_ERR_NONE</code>.
On hard failure, returns -2,
and sets the error code to
the error code of the hard failure,
which will never be <code>MARPA_ERR_NONE</code>.
Note that -2 is a valid &ldquo;integer value&rdquo; for
an Earley set,
so that when -2 is returned,
the error code is the only way to distinguish
success from failure.
The error code can be determined using
<code>marpa_g_error()</code>.
See <a href="Error-methods.html#marpa_005fg_005ferror">marpa_g_error()</a>.
</p>
</dd></dl>

<a name="marpa_005fr_005flatest_005fearley_005fset_005fvalues_005fset"></a><dl>
<dt><a name="index-marpa_005fr_005flatest_005fearley_005fset_005fvalues_005fset"></a>Mutator function: <em>int</em> <strong>marpa_r_latest_earley_set_values_set</strong> <em>(  Marpa_Recognizer <var>r</var>,   int value,   void* pvalue)</em></dt>
<dd>
<p>Sets the integer and pointer value of the latest Earley set.
For more about the &ldquo;integer value&rdquo; and &ldquo;pointer value&rdquo;
of an Earley set,
see <a href="#marpa_005fr_005fearley_005fset_005fvalues">marpa_r_earley_set_values()</a>.
</p>
<p><strong>Return value</strong>: On success, returns a non-negative integer.
On hard failure, returns -2.
</p></dd></dl>

<hr>
<div class="header">
<p>
Next: <a href="Other-parse-status-methods.html#Other-parse-status-methods" accesskey="n" rel="next">Other parse status methods</a>, Previous: <a href="Recognizer-life-cycle-mutators.html#Recognizer-life-cycle-mutators" accesskey="p" rel="prev">Recognizer life cycle mutators</a>, Up: <a href="Recognizer-methods.html#Recognizer-methods" accesskey="u" rel="up">Recognizer methods</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-terms.html#Index-of-terms" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
